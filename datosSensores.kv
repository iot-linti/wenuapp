#:import Toolbar kivymd.toolbar.Toolbar
#:import ThemeManager kivymd.theming.ThemeManager
#:import NavigationDrawer kivymd.navigationdrawer.MDNavigationDrawer
#:import NavigationDrawer kivymd.navigationdrawer.NavigationLayout
#:import MDList kivymd.list.MDList
#:import OneLineListItem kivymd.list.OneLineListItem
#:import TwoLineListItem kivymd.list.TwoLineListItem
#:import ThreeLineListItem kivymd.list.ThreeLineListItem
#:import OneLineAvatarListItem kivymd.list.OneLineAvatarListItem
#:import OneLineIconListItem kivymd.list.OneLineIconListItem
#:import OneLineAvatarIconListItem kivymd.list.OneLineAvatarIconListItem
#:import MDTextField kivymd.textfields.MDTextField
#:import MDDropdownMenu kivymd.menu.MDDropdownMenu

#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import colors kivymd.color_definitions.colors
#:import MDTabbedPanel kivymd.tabs.MDTabbedPanel
#:import MDTab kivymd.tabs.MDTab
#:import MDThemePicker kivymd.theme_picker.MDThemePicker

#:import NavigationDrawerToolbar kivymd.navigationdrawer.NavigationDrawerToolbar

#:import MDTextField kivymd.textfields.MDTextField

#:import MDProgressBar kivymd.progressbar.MDProgressBar


<MainBox>:
	#id: datos
	#orientation: 'vertical'
	#lay_nav: nav_layout
	pisos_nav: nav_drawer
	Screen:
		name: 'login'
		Login:
			size_hint_y: None
			height: dp(400)
			padding: dp(200)
			orientation: 'vertical'
			spacing: 10
			MDTextField:
				id: usr
				text: app.config.get('WENU', 'USER')
				hint_text: 'Usuario'
				message: "Debe ingresar un usuario"
				required: True
				message_mode: "on_error"
			MDTextField:
				id: password
				text: app.config.get('WENU', 'PASS')
				hint_text: "Contraseña"
				message: "Debe ingresar una contraseña"
				required: True
				password: True
				message_mode: "on_error"
			MDRaisedButton:
				text: 'Conectar'
				pos_hint: {'center_x': 0.5, 'center_y': 0.6}
				on_press: self.parent.conectar(usr.text, password.text)
	Load:
		id: progressbar
		name: 'progressbar'
		prog_b: progress_bar
		BoxLayout:
			id: box_progress
			orientation:'vertical'
			padding: '8dp'
			spacing: '40dp'
			#prog_b: progress_bar
			
			MDProgressBar:
				id: progress_bar
				min: 0
				max: 100
				value: 0
	Screen:
		name: 'main'
		BoxLayout:
			id: datos
			orientation: 'vertical'
			lay_nav: nav_layout
			pisos_nav: nav_drawer
			Toolbar:
				md_bg_color: app.theme_cls.primary_color
				background_palette: 'Primary'
				background_hue: '500'
				id: toolbar
				title: 'Datos sensores'
				background_color: self.theme_cls.primary_color
				left_action_items: [['menu', lambda x: self.parent.lay_nav.toggle_nav_drawer()]]
				right_action_items: [['dots-vertical', lambda x: MDDropdownMenu(items=root.menu_items, width_mult=2).open(self)]]
			NavigationLayout:
				id: nav_layout
				PisosNavDrawer:
					title: "Pisos"
					id: nav_drawer
					NavigationDrawerToolbar:
						title: "Pisos"
						id: nav_drawer_tool
				ScreenManager:
					id: scr_mngr
					Screen:
						name: 'bottomsheet'



#<NavigationDraweIconButton>:
#	icon: 'checkbox-blank-circle'

#
<Mota>:
	background_color: [0.0, 0.0, 0.0, 0.0]
	size_hint: (0.1, .1)
	markup: True
	valign: 'bottom'

<Piso>:
	#flayout: flayout_id
	#title_color: [ 33/255., 150/255., 243/255., .9 ]
	#background: 'atlas:/data/images/defaulttheme/button_pressed'
	#background_color: [0,0,0,0]
	FloatLayout:
		id: flayout_id
		size: self.parent.size
		MDLabel:
			id: fecha
			#size_hint: (0.8, .1)
			pos_hint: {'top': 1.44, 'right': 1.01}
			text: 'Ultima actualización: '
			#markup: True
